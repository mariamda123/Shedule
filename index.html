<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestión Académica</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>Plataforma de Gestión Académica</h1>
      <p>Rol activo: <strong>Coordinador</strong></p>
    </header>

    <main>
      <nav class="tabs" aria-label="Navegación principal">
        <button class="tab-button active" data-tab="principal" type="button">Principal</button>
        <button class="tab-button" data-tab="configuracion" type="button">Configuración</button>
      </nav>

      <section id="principal" class="tab-panel active" aria-labelledby="principal">
        <h2>Pantalla principal</h2>

        <article class="card">
          <h3>Contexto activo de trabajo</h3>
          <form id="active-context-form" class="inline-grid context-grid">
            <label for="active-coordination">Coordinación</label>
            <select id="active-coordination" name="coordinationId"></select>

            <label for="active-career">Carrera</label>
            <select id="active-career" name="careerId"></select>

            <label for="active-shift">Turno</label>
            <select id="active-shift" name="shiftId"></select>
          </form>
          <p class="help-text">La carga CSV, la clase manual y la generación automática usarán esta selección.</p>
        </article>

        <div class="grid-layout mt-1">
          <article class="card">
            <h3>Carga de clases por CSV</h3>
            <p class="help-text">Campos esperados: <strong>clase, año, créditos, categorías, compartido</strong>.</p>
            <form id="csv-form" class="stack">
              <label for="class-csv">Archivo CSV</label>
              <input id="class-csv" name="classCsv" type="file" accept=".csv" required />
              <button type="submit">Adjuntar CSV</button>
            </form>
            <p id="csv-error" class="error-text" role="alert" aria-live="assertive"></p>
            <ul id="csv-list" class="list"></ul>
          </article>

          <article class="card">
            <h3>Agregar clase manual</h3>
            <form id="manual-class-form" class="stack">
              <label for="manual-class-name">Clase</label>
              <input id="manual-class-name" name="className" type="text" required />

              <label for="manual-class-year">Año</label>
              <select id="manual-class-year" name="year" required>
                <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option>
              </select>

              <label for="manual-class-day">Día</label>
              <select id="manual-class-day" name="day" required></select>

              <label for="manual-class-block">Bloque</label>
              <select id="manual-class-block" name="block" required></select>

              <button type="submit">Agregar clase manual</button>
            </form>
            <p id="manual-class-error" class="error-text" role="alert" aria-live="assertive"></p>
          </article>

          <article class="card">
            <h3>Generación automática por carrera</h3>
            <p class="help-text">Usa la coordinación, carrera y turno seleccionados arriba. Aquí solo seleccionas el período.</p>
            <form id="auto-generate-form" class="stack">
              <label for="auto-period">Periodo</label>
              <select id="auto-period" name="periodId"></select>
              <button type="submit">Generar horario automáticamente</button>
            </form>
            <p id="auto-generate-error" class="error-text" role="alert" aria-live="assertive"></p>
          </article>
        </div>

        <article class="card mt-1">
          <div class="card-actions">
            <h3>Horarios por año (carrera activa)</h3>
            <button id="reset-schedule" type="button" class="danger-button">Reiniciar solo horarios</button>
          </div>
          <p class="help-text">Siempre se muestran 5 horarios (1° a 5° año). Si no hay clases, la tabla queda vacía.</p>
          <div id="active-schedules" class="schedule-stack"></div>
        </article>

        <article class="card mt-1">
          <h3>Vista por coordinación - carrera - turno</h3>
          <form id="view-filter-form" class="inline-grid context-grid">
            <label for="view-coordination">Coordinación</label>
            <select id="view-coordination" name="coordinationId"></select>
            <label for="view-career">Carrera</label>
            <select id="view-career" name="careerId"></select>
            <label for="view-shift">Turno</label>
            <select id="view-shift" name="shiftId"></select>
          </form>
          <div id="view-schedules" class="schedule-stack"></div>
        </article>
      </section>

      <section id="configuracion" class="tab-panel" aria-labelledby="configuracion">
        <h2>Configuración académica</h2>

        <div class="grid-layout">
          <article class="card">
            <h3>Coordinaciones</h3>
            <form id="coordination-form" class="stack">
              <label for="coordination-name">Nombre</label>
              <input id="coordination-name" name="name" type="text" required />
              <button type="submit">Agregar coordinación</button>
            </form>
            <ul id="coordination-list" class="list"></ul>
          </article>

          <article class="card">
            <h3>Carreras</h3>
            <form id="career-form" class="stack">
              <label for="career-name">Nombre</label>
              <input id="career-name" name="name" type="text" required />

              <label for="career-coordination">Coordinación</label>
              <select id="career-coordination" name="coordinationId" required></select>

              <button type="submit">Agregar carrera</button>
            </form>
            <ul id="career-list" class="list"></ul>
          </article>

          <article class="card">
            <h3>Categorías</h3>
            <form id="category-form" class="stack">
              <label for="category-name">Nombre</label>
              <input id="category-name" name="name" type="text" required />
              <button type="submit">Agregar categoría</button>
            </form>
            <ul id="category-list" class="list"></ul>
          </article>

          <article class="card">
            <h3>Maestros</h3>
            <form id="teacher-form" class="stack">
              <label for="teacher-name">Nombre</label>
              <input id="teacher-name" name="name" type="text" required />
              <button type="submit">Agregar maestro</button>
            </form>
            <ul id="teacher-list" class="list"></ul>
          </article>
        </div>

        <article class="card shift-card">
          <h3>Turnos por bloques</h3>
          <p class="help-text">Configura días hábiles y prioridad en una sola línea.</p>
          <form id="shift-form" class="stack">
            <label for="shift-name">Nombre del turno</label>
            <input id="shift-name" name="name" type="text" required />

            <label for="shift-days">Días habilitados (separados por coma)</label>
            <input id="shift-days" name="days" type="text" value="Lunes,Martes,Miércoles,Jueves,Viernes" required />

            <label for="shift-priorities">Prioridad por día</label>
            <input id="shift-priorities" name="dayPriorities" type="text" value="Lunes:1,Martes:2,Miércoles:3,Jueves:4,Viernes:5" />

            <label for="shift-credits">Créditos por bloque</label>
            <input id="shift-credits" name="creditsPerBlock" type="number" min="1" required />

            <label for="shift-minutes">Minutos por bloque</label>
            <input id="shift-minutes" name="minutesPerBlock" type="number" min="15" step="5" required />

            <label for="shift-blocks">Cantidad de bloques</label>
            <input id="shift-blocks" name="blocks" type="number" min="1" required />

            <label for="shift-start">Hora inicio de las clases</label>
            <input id="shift-start" name="startTime" type="time" value="08:00" required />

            <button type="submit">Agregar turno</button>
          </form>
          <p id="shift-error" class="error-text" role="alert" aria-live="assertive"></p>
          <ul id="shift-list" class="list"></ul>
        </article>

        <article class="card shift-card">
          <h3>Configuración de periodos por turno</h3>
          <form id="period-form" class="stack">
            <label for="period-shift">Turno</label>
            <select id="period-shift" name="shiftId" required></select>

            <label for="period-name">Nombre del período</label>
            <input id="period-name" name="name" type="text" placeholder="Ej. Matutino" required />

            <label for="period-start">Inicio</label>
            <input id="period-start" name="startTime" type="time" required />

            <label for="period-end">Fin</label>
            <input id="period-end" name="endTime" type="time" required />

            <button type="submit">Agregar período</button>
          </form>
          <p id="period-error" class="error-text" role="alert" aria-live="assertive"></p>
          <ul id="period-list" class="list"></ul>
        </article>
      </section>
    </main>

    <template id="list-item-template">
      <li class="list-item"></li>
    </template>

    <script src="script.js"></script>
  </body>
</html>
